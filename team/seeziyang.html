<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>See Zi Yang - Project Portfolio Page</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">LiBerry</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/AY1920S1-CS2103T-F13-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>See Zi Yang - Project Portfolio Page</h1></div><div id="content"><div class="sect1">
<h2 id="project-liberry"><a class="link" href="#project-liberry">PROJECT: LiBerry</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>LiBerry is a desktop library management application for librarians to manage their books, borrowers and loans.
It is a software optimized for librarians who prefer to work with a Command Line Interface (CLI), whereby commands are typed into the software.<br></p>
</div>
<div class="paragraph">
<p>Main features of LiBerry:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add and remove books</p>
</li>
<li>
<p>Comprehensive search system to look for books</p>
</li>
<li>
<p>Register new borrowers</p>
</li>
<li>
<p>Manage loaning and returning of books</p>
</li>
<li>
<p>Track overdue fines payment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>My role was to design and implement the code for the loan related features. The following sections further elaborates on these
enhancements I have made. Also included are the details of the relevant documentation I have written in the user and developer guide to
assist users and other developers to understand these features.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of Contributions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section summarizes the contributions I have made to the team project, including contributions to the code base, documentation and project management.</p>
</div>
<div class="sect2">
<h3 id="main-enhancement-loan-related-features"><a class="link" href="#main-enhancement-loan-related-features">Main enhancement - Loan-related features</a></h3>
<div class="paragraph">
<p>I have added features related to the loaning and returning of books in our library management app, LiBerry.</p>
</div>
<div class="sect3">
<h4 id="what-it-does"><a class="link" href="#what-it-does">What it does</a></h4>
<div class="paragraph">
<p>This set of features allow our users, librarians, to <strong>loan</strong> out books to borrowers, <strong>return</strong> loaned out books, <strong>renew</strong> loaned
out books, and to record payments of <strong>fines</strong> incurred for overdue books.</p>
</div>
<div class="paragraph">
<p>Every time a book is borrowed, both the starting date and due date of the loan are automatically recorded. For each loaned
out book, other than the details of the book and the borrower, the starting date, due date, and returning date,
along with the number of times it has been renewed and the fine incurred after returning are all meticulously tracked.</p>
</div>
<div class="paragraph">
<p>The intuitive syntax for the commands related to these features also enables librarians to quickly serve a borrower.</p>
</div>
</div>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>As the main purpose of a library is to allow visitors to borrow books, these features are core to a library and are
needed for a library to function.</p>
</div>
</div>
<div class="sect3">
<h4 id="highlights"><a class="link" href="#highlights">Highlights</a></h4>
<div class="paragraph">
<p>The implementation of these features was challenging as a whole new set of code had to be written to model each loan occurrence
and to store these information. The book, borrower and the loan object had to be linked efficiently to reduce duplicated information stored.</p>
</div>
<div class="paragraph">
<p>Moreover, a great deal of defensive programming was applied as there were many bounds to each of these features. For
example, these features should only work when certain conditions are met, such as when the user is currently serving borrowers
and the inputs correspond to a book that is not on loan.</p>
</div>
<div class="paragraph">
<p>Additionally, I also created utility classes like <code>DateUtil</code> and <code>FineUtil</code> to centralize utility functions that dealt with
dates and fines respectively.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="code-contributed"><a class="link" href="#code-contributed">Code contributed</a></h3>
<div class="paragraph">
<p>[<a href="https://github.com">Functional code</a>] [<a href="https://github.com">Test code</a>] <em>{give links to collated code files}</em></p>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="sect3">
<h4 id="project-management"><a class="link" href="#project-management">Project management</a></h4>
<div class="ulist">
<ul>
<li>
<p>Managed the issues covered for each milestone and set up their deadlines. Also added each feature as an issue and
assigned them to the appropriate team member.</p>
<div class="ulist">
<ul>
<li>
<p>The issues and milestones can be seen <a href="https://github.com/AY1920S1-CS2103T-F13-1/main/issues">here</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Set up two Github project boards.</p>
<div class="ulist">
<ul>
<li>
<p>The project board used to brainstorm and prioritise user stories can be seen <a href="https://github.com/AY1920S1-CS2103T-F13-1/main/projects/2">here</a>.</p>
</li>
<li>
<p>The project board used to keep track of the features and commands can be seen <a href="https://github.com/AY1920S1-CS2103T-F13-1/main/projects/3">here</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Updated developer guide to include user stories, use cases and non-functional requirements. Done through pull requests:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/81">#81</a> - Included user stories and non-functional requirements specific to LiBerry.</p>
</li>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/157">#157</a> - Updated non-functional requirements and use cases and added a general use case diagram.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Maintained the team project website, including the site headers, navigation bar, badges and photos. Done through pull requests:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/86">#86</a> - Updated Travis badges.</p>
</li>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/97">#97</a> - Updated header, README, contact us, developer photos, role and responsibilities.</p>
</li>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/100">#100</a> - Fixed user interface image not appearing on the website.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Reviewed pull requests by team members, e.g. &#8230;&#8203;&#8230;&#8203;&#8230;&#8203;..</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="enhancements-to-existing-features"><a class="link" href="#enhancements-to-existing-features">Enhancements to existing features</a></h4>
<div class="ulist">
<ul>
<li>
<p>Enhanced code for <code>Borrower</code> class to be immutable. Done through pull request:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/152">#152</a> - Modified fields in Borrower to be immutable and
added methods in the class to return new copies instead of mutating values in the current object.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Upgraded the <code>set</code> command to support setting the maximum renew count such that librarians can define what is the maximum number of times
a book can be renewed.
Done through pull request:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/178">#178</a> - Modified the <code>set</code> command to take in maximum renew
count and integrated this setting to the model component.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Updated the user interface to reflect more borrower-related details. Done through pull request:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/179">#179</a> - Updated panel dimensions to fit more results and
added more borrower-related information such as total outstanding fine.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="documentation"><a class="link" href="#documentation">Documentation</a></h4>
<div class="ulist">
<ul>
<li>
<p>Improved and rectified the flow, content, styling, legend and diagrams of the user guide and developer guide
according to feedback received from tutor and peers.
Done through pull requests: <a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/157">#157</a>, <a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/163">#163</a>,
<a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/179">#179</a>, <a href="https://github.com/AY1920S1-CS2103T-F13-1/main/pull/182">#182</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="community"><a class="link" href="#community">Community</a></h4>
<div class="ulist">
<ul>
<li>
<p>Gave in-depth and insightful review of team member&#8217;s pull requests. Examples includes: &#8230;&#8203;&#8230;&#8203;..</p>
</li>
<li>
<p>Reported bugs in the team project to team members in the group chat.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="tools"><a class="link" href="#tools">Tools</a></h4>
<div class="ulist">
<ul>
<li>
<p>Integrated a new Github plugin, Coveralls, to the team repository. Coveralls was immensely helpful in tracking the
test coverage of our team&#8217;s code.</p>
</li>
<li>
<p>Set up Netlify for the team repository to easily and quickly preview changes made to the team website and documentation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="quick-start"><a class="link" href="#quick-start">Quick Start</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dive into LiBerry with our simple set-up guide a quick tour of our user interface and features!</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you have Java <code>11</code> or above installed in your Computer.</p>
</li>
<li>
<p>Download the latest <code>LiBerry.jar</code> <a href="{repoURL}/releases">here</a>.</p>
</li>
<li>
<p>Copy the file to the folder you want to use as the home folder for your LiBerry.</p>
</li>
<li>
<p>Double-click the file to start the app. The GUI should appear in a few seconds.</p>
<div class="imageblock">
<div class="content">
<img src="../images/Ui.png" alt="Ui">
</div>
<div class="title">Figure 1. LiBerry&#8217;s User Interface</div>
</div>
</li>
<li>
<p>Type the command in the command box and press <kbd>Enter</kbd> to execute it.<br>
e.g. typing <strong><code>help</code></strong> and pressing <kbd>Enter</kbd> will open the help window.</p>
</li>
<li>
<p>Here are some commands you can try out:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Add a new book</strong> to LiBerry by using <code>add t/Animal Farm a/George Orwell</code></p>
</li>
<li>
<p><strong>Register a new borrower</strong> to LiBerry by using <code>register n/John Smith p/97875454 e/jsmith@gmail.com</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Refer to <a href="#Features">[Features]</a> for details of each command.</p>
</li>
<li>
<p>A list of books will be displayed at the left column but not a list of borrowers as a list of borrowers
will not be very useful. Serving a borrower require the borrower&#8217;s <code>borrowerId</code> instead browsing
the app until the borrower&#8217;s name/id is found.</p>
</li>
</ol>
</div>
<hr>
<div class="sect3">
<h4 id="loaning-book-s-code-loan-code"><a class="link" href="#loaning-book-s-code-loan-code">Loaning book(s): <code>loan</code></a></h4>
<div class="paragraph">
<p>Loan book(s) by their serial number.<br>
Format: <code>loan sn/BOOK_SN</code><br>
Format: <code>loan sn/BOOK_SN [sn/BOOK_SN]&#8230;&#8203;</code> <strong>- Coming in v2.0</strong>
Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>loan sn/B00041</code><br>
Loans the book with serial number B00041 to the currently served borrower.</p>
</li>
<li>
<p><code>loan sn/B00201 sn/B02929 sn/B00203</code> <strong>- Coming in v2.0</strong><br>
Loans the books with serial numbers B00201, B02929 and B00203 to the currently served borrower.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After loaning all books, upon the <code>DONE</code> command, a printable loan slip in pdf format will be generated. The loan slip will be opened in your computer&#8217;s pdf viewer and also saved in the <code>loan_slips</code> folder.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="../images/LoanSlip.png" alt="LoanSlip" width="250">
</div>
<div class="title">Figure 2. Printable loan slip generated.</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="returning-book-s-code-return-code"><a class="link" href="#returning-book-s-code-return-code">Returning book(s): <code>return</code></a></h4>
<div class="paragraph">
<p>Return book(s) that were loaned by the borrower.<br>
Format: <code>return INDEX</code> or <code>return -all</code><br>
Including <code>-all</code> will return all currently loaned books.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Returns the book at the specified <code>INDEX</code> in the borrower panel or all of the currently served borrower&#8217;s loaned out books.</p>
</li>
<li>
<p>The index refers to the index number shown in the borrower&#8217;s book list on the right.</p>
</li>
<li>
<p>The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p><code>INDEX</code> indicates the book at this index in the borrower&#8217;s book list.</p>
</li>
<li>
<p><code>-all</code> indicates all the books currently loaned out by the borrower.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="renewing-book-s-code-renew-code"><a class="link" href="#renewing-book-s-code-renew-code">Renewing book(s): <code>renew</code></a></h4>
<div class="paragraph">
<p>Renew book(s) from the list of currently loaned books, i.e., extend their due dates.<br>
Format: <code>renew INDEX</code> or <code>renew -all</code><br></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Renews the book at the specified <code>INDEX</code> in the borrower panel or all of the currently served borrower&#8217;s loaned out books that can still be renewed.</p>
</li>
<li>
<p>The index refers to the index number shown in the borrower&#8217;s book list on the right.</p>
</li>
<li>
<p>The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p><code>INDEX</code> indicates the book at this index in the borrower&#8217;s book list.</p>
</li>
<li>
<p><code>-all</code> indicates all the books currently loaned out by the borrower that still can be renewed.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="paying-fines-code-pay-code"><a class="link" href="#paying-fines-code-pay-code">Paying fines: <code>pay</code></a></h4>
<div class="paragraph">
<p>Reduces the outstanding amount of borrower&#8217;s fines by AMOUNT (in dollars).<br>
Format: <code>pay $AMOUNT</code></p>
</div>
</div>
<div class="sect3">
<h4 id="reserve-a-book-code-reserve-code-coming-in-v2-0"><a class="link" href="#reserve-a-book-code-reserve-code-coming-in-v2-0">Reserve a book: <code>reserve</code> - Coming in v2.0</a></h4>
<div class="paragraph">
<p>Reserve a particular book
Format: <code>reserve INDEX</code> or <code>reserve sn/BOOK_SN</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Reserves the book at the specified <code>INDEX</code> or the book with the specified serial number <code>BOOK_SN</code> for the currently served borrower.</p>
</li>
<li>
<p>The index refers to the index number shown in the displayed book list.</p>
</li>
<li>
<p>The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p><code>INDEX</code> indicates the book at this index in the search results list</p>
</li>
<li>
<p><code>sn/BOOK_SN</code> indicates the particular book with this serial number</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>reserve 2</code><br>
Reserves the 2nd book in the results of the <code>find</code> command for the currently served borrower.</p>
</li>
<li>
<p><code>reserve sn/B02422</code><br>
Reserves the book with serial number <code>sn/B02422</code> for the currently served borrower.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="book-loaning-features"><a class="link" href="#book-loaning-features">Book Loaning Features</a></h3>
<div class="sect3">
<h4 id="functionalities"><a class="link" href="#functionalities">Functionalities</a></h4>
<div class="paragraph">
<p>The functionalities and commands associated with the book loaning feature are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>loan sn/BOOK_SN</code></p>
<div class="ulist">
<ul>
<li>
<p>Loans out a book based on its serial number.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>return INDEX [-all]</code></p>
<div class="ulist">
<ul>
<li>
<p>Returns a book based on the index of that book shown on the GUI.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>renew INDEX [-all]</code></p>
<div class="ulist">
<ul>
<li>
<p>Renews a book based on the index of that book shown on the GUI.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>reserve sn/BOOK_SN</code> or <code>reserve INDEX</code></p>
<div class="ulist">
<ul>
<li>
<p>Reserves a book based on its serial number or index of that book shown on the GUI.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>pay AMOUNT</code></p>
<div class="ulist">
<ul>
<li>
<p>Pay a fine amount for overdue books.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rationale for the different types of arguments for the loan, return, renew and reserve may not be apparent at first,
but it is actually very simple.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When borrowers come to the librarian (our user) to borrow a book, the book itself would have
a serial number. Thus, the user just types in the serial number of the book to be loaned out, instead of using the find
command to locate that book in LiBerry to use its index.</p>
</li>
<li>
<p>Whereas, when a borrower comes to return a book, the librarian only sees a limited list of book that was loaned out by
the borrower on the GUI. Hence, the librarian need not type the longer serial number to return that book, and instead, types
its index shown in the GUI list. Likewise, the same idea is applied to renewing books</p>
</li>
<li>
<p>When reserving books for borrowers, it is possible that the book is found through the GUI, and thus, index is used. Or,
the borrower brings the physical book forward to reserve it as he/she does not want to borrow it now.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<div class="paragraph">
<p>This feature is mainly facilitated by the <code>Loan</code> association class between a <code>Book</code> and a <code>Borrower</code>. The object diagram
just after a book is loaned out can be seen below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LoanObjectDiagram.png" alt="LoanObjectDiagram" width="880">
</div>
<div class="title">Figure 3. Loan object diagram after a new Loan is created</div>
</div>
<div class="paragraph">
<p>&#160;<br></p>
</div>
<div class="paragraph">
<p>In this instance, the <code>Borrower</code> with <code>BorrowerId</code> K0789 currently has a <code>Book</code> with <code>SerialNumber</code> B00456 loaned out.
The <code>Loan</code> associated to this loan, with <code>LoanId</code> L000123, is stored in the <code>LoanRecords</code> class of the model component.</p>
</div>
<div class="paragraph">
<p>Both the <code>Book</code> and <code>Borrower</code> objects also have access to this <code>Loan</code> object.</p>
</div>
<div class="paragraph">
<p>In each <code>Loan</code> object, only the <code>BorrowerId</code> of the <code>Borrower</code> and <code>SerialNumber</code> of the <code>Book</code> is stored to reduce
circular dependency.</p>
</div>
<div class="paragraph">
<p>The <code>LoanRecords</code> class stores all the <code>Loan</code> objects tracked by LiBerry in a HashMap, where the key is its <code>LoanId</code>.</p>
</div>
<div class="paragraph">
<p>Immutability of each object is supported to ensure correctness of undo and redo functionality.</p>
</div>
<div class="sect4">
<h5 id="loaning"><a class="link" href="#loaning">Loaning</a></h5>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user enters a loan command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/LoaningActivityDiagram.png" alt="LoaningActivityDiagram" width="650">
</div>
<div class="title">Figure 4. Activity diagram when a loan command is entered</div>
</div>
<div class="paragraph">
<p>&#160;<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The else branch of each branch node should have a guard condition <code>[else]</code> but due to a limitation of PlantUML,
they are not shown.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a book is successfully loaned out by a borrower, a new <code>Loan</code> object is created. The <code>LoanId</code> is automatically generated according
to the number of loans in the <code>LoanRecords</code> object in the model. The <code>startDate</code> is also automatically set to today&#8217;s date.
The <code>endDate</code> is automatically set according to the loan period set in the user settings. This <code>Loan</code> object is added to
<code>LoanRecords</code> through the call to <code>Model#addLoan(loan)</code>.</p>
</div>
<div class="paragraph">
<p>The new <code>Borrower</code> instance is created by copying the details of the borrower from the original object, and also with this <code>Loan</code>
object being added into its <code>currentLoanList</code>. The new borrower object then replaces the old borrower object in the
<code>BorrowerRecords</code> object in the model. These two steps are done through the method call to <code>Model#servingBorrowerNewLoan(loan)</code>.
The new <code>Book</code> instance is also created by copying the details of the original book object, and likewise, with this <code>Loan</code> object added into it.
Similarly, the new book object replaces the old book object in the <code>Catalog</code> object in the model through the call to
<code>Model#setBook(bookToBeLoaned, loanedOutBook)</code>. These were done to support immutability of the objects.</p>
</div>
</div>
<div class="sect4">
<h5 id="returning"><a class="link" href="#returning">Returning</a></h5>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user enters a return command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ReturningActivityDiagram.png" alt="ReturningActivityDiagram" width="820">
</div>
<div class="title">Figure 5. Activity diagram when a book is being returned.</div>
</div>
<div class="paragraph">
<p>&#160;<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The else branch of each branch node should have a guard condition <code>[else]</code> but due to a limitation of PlantUML,
they are not shown.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a loaned out book is successfully returned by a borrower, the associated <code>Loan</code> object is moved from the borrower&#8217;s
<code>currentLoanList</code> to <code>returnedLoanList</code>. Inside the book object, this <code>Loan</code> object is also removed. Inside this loan
object, the <code>returnDate</code> is added according to today&#8217;s date. The <code>remainingFineAmount</code> of this loan object is also
calculated based on the fine amount set in the user settings.</p>
</div>
<div class="paragraph">
<p>Similarly, the creation of new objects for replacement are also done to support immutability. They are supported by the
methods <code>Model#setBook(bookToBeReturned, returnedBook)</code> and <code>Model#servingBorrowerReturnLoan(returningLoan)</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="renewing"><a class="link" href="#renewing">Renewing</a></h5>
<div class="paragraph">
<p>When a book is successfully renewed by a borrower, the <code>renewCount</code> of the <code>Loan</code> object is incremented by 1
and its <code>dueDate</code> is also increased by the renew period set in the user settings.</p>
</div>
<div class="paragraph">
<p>Similarly, the creation of new objects for replacement are also done to support immutability.</p>
</div>
</div>
<div class="sect4">
<h5 id="reserving"><a class="link" href="#reserving">Reserving</a></h5>
<div class="paragraph">
<p>When a book is successfully reserved by a borrower, the <code>Book</code> object is marked as reserved and is added to the borrower&#8217;s
<code>reservedBookList</code>.</p>
</div>
<div class="paragraph">
<p>Similarly, the creation of new objects for replacement are also done to support immutability.</p>
</div>
</div>
<div class="sect4">
<h5 id="paying-fines"><a class="link" href="#paying-fines">Paying fines</a></h5>
<div class="paragraph">
<p>When a fine amount is successfully paid by a borrower, the <code>remainingFineAmount</code> and <code>paidFineAmount</code> of the loans in
the borrower&#8217;s <code>returnedLoanList</code> is updated accordingly.</p>
</div>
<div class="paragraph">
<p>Similarly, the creation of new objects for replacement are also done to support immutability.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-file-storage-of-loans"><a class="link" href="#aspect-file-storage-of-loans">Aspect: File storage of loans</a></h5>
<div class="paragraph">
<p>Inside the model, for each current loan (loans that are not returned yet), the <code>Book</code>, the <code>Borrower</code> and the <code>LoanRecords</code>
point to the same the same <code>Loan</code> object. LiBerry&#8217;s storage system is such that <code>Catalog</code> stores the books,
<code>BorrowerRecords</code> stores the borrowers and <code>LoanRecords</code> stores the loans. Thus, a decision was made to decide how these
loans are serialized and stored in the user&#8217;s file system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1:</strong> Save the whole <code>Loan</code> object in each book in the <code>catalog.json</code> and save the the whole of every <code>Loan</code>
object in each borrower in <code>borrowerrecords.json</code>. The <code>Loan</code> object is also duplicated in <code>loanrecords.json</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement. No need to read storage files in a specific order.</p>
</li>
<li>
<p>Cons: Storage memory size issues. Same information is duplicated and stored in all 3 storage files.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2 (selected choice):</strong> Save only the <code>LoanId</code> of each <code>Loan</code> object in each book in the <code>catalog.json</code>
and save a list of <code>LoanId</code> in each borrower in <code>borrowerrecords.json</code>. The whole <code>Loan</code> object is only saved in
<code>loanrecords.json</code>. When reading the storage files at the start of the application, <code>loanrecords.json</code> need to be read
in first, before the borrowers and books can be read in as they would get the loan objects from the <code>LoanRecords</code> based
on their <code>LoanId</code> s.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Uses less memory as only <code>LoanId</code> is stored for the books and borrowers, instead of the whole serialized loan objects.
Also, <code>LoanRecords</code> thus serve as a single source of truth.</p>
</li>
<li>
<p>Cons: Must ensure that the reading of stored files are in the correct order, and also correct <code>Loan</code> objects are referenced
after reading in <code>borrowerrecords.json</code> and <code>catalog.json</code>. Method used to retrieve a <code>Loan</code> object from its <code>LoanId</code> must
also be fast enough as there can be hundreds of thousands of loans.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-data-structure-to-support-recording-of-loans-in-loanrecords"><a class="link" href="#aspect-data-structure-to-support-recording-of-loans-in-loanrecords">Aspect: Data structure to support recording of loans in LoanRecords</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1:</strong> Use a list data structure, such as an <code>ArrayList</code> to store the loans in the model component.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement. Easy to obtain insertion order of the loans and sort through the list.</p>
</li>
<li>
<p>Cons: Slow to search for a <code>Loan</code> based on its <code>LoanId</code>, i.e., O(n) time, as the list must be traversed to find the
correct associated <code>Loan</code> object. The additional time taken adds up when reading the storage files during the starting
up of the application. Thus, it can make the application feel laggy and unresponsive at the start.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2 (selected choice):</strong> Use a <code>HashMap</code> to store the loans, where the key is its <code>LoanId</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Fast to retrieve a <code>Loan</code> object based on its <code>LoanId</code>, i.e., O(1) time.</p>
</li>
<li>
<p>Cons: Insertion order is not preserved. Have to traverse through all the loan objects in the HashMap to check their
<code>startDate</code> in order to obtain their insertion order.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-11-07 08:45:50 UTC</div></div></div></body></html>